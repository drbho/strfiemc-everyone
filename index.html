<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StrifeMC - Official Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #1a0f0d; color: #d6d3d1; scroll-behavior: smooth; overflow-x: hidden; }
        .medieval { font-family: 'MedievalSharp', cursive; }
        .gold-border { border-color: #D4AF37; }
        .gold-text { color: #D4AF37; }
        .bg-brown-dark { background-color: #2b1d19; }
        .input-style { @apply w-full p-3 rounded bg-[#1a0f0d] border border-stone-700 focus:border-[#D4AF37] outline-none text-white transition-all; }
        .btn-gold { @apply bg-[#D4AF37] hover:bg-white text-[#1a0f0d] font-bold py-3 px-6 rounded transition-all uppercase shadow-lg cursor-pointer text-center block no-underline; }
        .nav-link { @apply hover:text-[#D4AF37] transition-colors cursor-pointer text-xs font-bold uppercase tracking-widest; }
        .section-fade { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .status-dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; margin-right: 8px; }
    </style>
</head>
<body>

    <div id="loginOverlay" class="fixed inset-0 z-[2000] bg-[#1a0f0d] flex items-center justify-center p-4">
        <div class="max-w-md w-full bg-brown-dark p-10 rounded-2xl border-2 gold-border shadow-2xl text-center">
            <h2 class="medieval text-5xl gold-text mb-4">StrifeMC</h2>
            <p class="mb-8 text-stone-400 text-xs font-bold uppercase tracking-widest">Identificati per entrare</p>
            <input type="text" id="loginNick" placeholder="Nickname Minecraft" class="input-style text-center text-xl mb-6">
            <button onclick="doLogin()" class="btn-gold w-full text-lg">Entra nel Portale</button>
        </div>
    </div>

    <div id="mainContent" class="hidden min-h-screen flex flex-col">
        <nav class="bg-[#1a0f0d] p-4 border-b gold-border sticky top-0 z-50 shadow-2xl">
            <div class="container mx-auto flex justify-between items-center">
                <div class="medieval text-3xl gold-text">Strife<span class="text-white">MC</span></div>
                <div class="hidden md:flex space-x-6 items-center">
                    <span onclick="showSection('home')" class="nav-link">Home</span>
                    <span onclick="showSection('rules')" class="nav-link">Regole</span>
                    <span onclick="showSection('store')" class="nav-link">Store VIP</span>
                    <span onclick="showSection('kitpvp')" class="nav-link">Modalit√†</span>
                    <span onclick="showSection('apply')" class="nav-link text-yellow-500">Candidature</span>
                    <span onclick="showSection('report')" class="text-red-500 hover:text-red-400 cursor-pointer text-xs font-bold uppercase tracking-widest">Segnala</span>
                </div>
                <div class="flex items-center space-x-3 bg-stone-900 px-3 py-2 rounded-lg border border-stone-700">
                    <img id="userHead" src="" class="w-6 h-6 rounded-sm">
                    <span id="displayNick" class="gold-text text-xs font-bold"></span>
                </div>
            </div>
        </nav>

        <div class="bg-gradient-to-r from-[#3e2723] to-[#1a0f0d] py-12 border-b border-stone-800 text-center">
            <h3 class="medieval text-xl gold-text mb-4 uppercase tracking-widest">Apertura Ufficiale</h3>
            <div id="timer" class="text-5xl font-black text-white medieval flex justify-center space-x-4 mb-8">00:00:00:00</div>
            <div class="inline-flex items-center bg-black/50 px-8 py-3 rounded-full border border-stone-700">
                <span id="statusDot" class="status-dot bg-gray-500"></span>
                <span id="statusText" class="text-xs font-bold uppercase tracking-widest text-stone-400">Verifica...</span>
                <span class="mx-4 text-stone-800">|</span>
                <span id="playerCount" class="text-xs font-bold gold-text">0 / 0 PLAYERS</span>
            </div>
        </div>

        <main class="container mx-auto py-16 px-4 flex-grow">
            <section id="homeSection" class="section-fade grid grid-cols-1 lg:grid-cols-3 gap-12 items-start">
                <div class="lg:col-span-2 space-y-8">
                    <h1 class="medieval text-7xl text-white uppercase leading-tight">Forgia il tuo <br><span class="gold-text">Destino</span></h1>
                    <div class="flex flex-wrap gap-4 pt-4">
                        <div class="bg-brown-dark p-6 rounded-xl border-2 gold-border shadow-2xl font-mono text-2xl gold-text">play.strifemc.it</div>
                        <a href="https://discord.gg/KqcWtrsNtp" target="_blank" class="bg-[#5865F2] hover:bg-white hover:text-[#5865F2] text-white font-bold py-6 px-8 rounded-xl transition-all uppercase flex items-center">Unisciti al Discord</a>
                    </div>
                </div>
                <div class="bg-[#232428] p-1 rounded-2xl border-2 gold-border shadow-2xl">
                    <iframe src="https://discord.com/widget?id=1328404227315531858&theme=dark" width="100%" height="400" frameborder="0" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
                </div>
            </section>

            <section id="applySection" class="hidden section-fade max-w-3xl mx-auto">
                <div class="bg-brown-dark p-8 rounded-2xl border gold-border shadow-2xl">
                    <h2 class="medieval text-3xl gold-text mb-8 text-center uppercase">Reclutamento Staff</h2>
                    <form id="applyForm" class="space-y-6">
                        <div>
                            <label class="gold-text text-sm font-bold uppercase block mb-2">Username Discord (es. mario_88)</label>
                            <input type="text" id="apply_discord_nick" required class="input-style" placeholder="Obbligatorio">
                        </div>
                        <div>
                            <label class="gold-text text-sm font-bold uppercase block mb-2">Seleziona Ruolo</label>
                            <select id="apply_role" onchange="generateQs()" class="input-style gold-text font-bold">
                                <option value="">-- Scegli ruolo --</option>
                                <option value="Trainee_SS">Trainee / SS Supporter</option>
                                <option value="Pluginner">Pluginner (Minecraft Java)</option>
                                <option value="Developer">Developer (Web/System)</option>
                                <option value="DiscordMod">Discord Moderator</option>
                            </select>
                        </div>
                        <div id="dynamicQs" class="space-y-10 pt-4 border-t border-stone-800"></div>
                        <button type="submit" id="submitBtn" class="btn-gold w-full hidden py-4">Invia Candidatura</button>
                    </form>
                </div>
            </section>

            <section id="rulesSection" class="hidden section-fade max-w-4xl mx-auto"><h2 class="medieval text-4xl gold-text text-center uppercase tracking-widest">Regole</h2><div class="bg-brown-dark p-8 rounded-2xl border gold-border mt-6 text-center italic">Consultare Discord per il regolamento completo.</div></section>
            <section id="storeSection" class="hidden section-fade text-center"><h2 class="medieval text-4xl gold-text mb-10 uppercase">Store VIP</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><a href="https://www.paypal.me/RangerKing60/5" target="_blank" class="btn-gold">VIP Aether - 5‚Ç¨</a><a href="https://www.paypal.me/RangerKing60/25" target="_blank" class="btn-gold">VIP Titan - 25‚Ç¨</a></div></section>
            <section id="kitpvpSection" class="hidden section-fade max-w-4xl mx-auto"><h2 class="medieval text-4xl gold-text text-center uppercase">KitPvP</h2><div class="bg-brown-dark p-8 rounded-2xl border border-stone-800 mt-6"><a href="https://www.paypal.me/RangerKing60/8" target="_blank" class="btn-gold">Kit Supreme - 8‚Ç¨</a></div></section>
            <section id="reportSection" class="hidden section-fade max-w-2xl mx-auto"><h2 class="medieval text-3xl text-red-500 text-center uppercase">Segnala</h2><form id="reportForm" class="space-y-6 mt-6"><input type="text" id="rep_target" placeholder="Nome segnalato" class="input-style border-red-900"><textarea id="rep_reason" placeholder="Dettagli..." class="input-style border-red-900"></textarea><button type="submit" class="w-full bg-red-800 py-4 font-bold rounded uppercase">Invia</button></form></section>
        </main>

        <footer class="bg-[#0f0a09] py-8 border-t border-stone-800 mt-12 text-center text-[10px] text-stone-700">¬© 2026 StrifeMC Network</footer>
    </div>

    <script>
        const WEBHOOK_CANDIDATURE = 'https://discord.com/api/webhooks/1455482089691549853/wakB6MPp_qHri9gJtoydm7_QCilw8VaPZS1BJlBJGeN50nbGm9z3TYgPhQL4B6P1P8KE';
        const WEBHOOK_LOGS = 'https://discord.com/api/webhooks/1455535805941420284/GwGwF6tjtHs74WlVlGs8MJNt20Bz00E29IFqZvZ1diwp86u3CfgqIFoHoUur9eFrQ4tu';

        const QUESTIONS = {
            "Trainee_SS": ["1. IGN","2. Discord","3. Et√† (14+)","4. Conoscenza?","5. Perch√© noi?","6. Descriviti","7. Voto SS","8. Tools?","9. Client diff?","10. Query?","11. %temp%?","12. Prefetch?","13. BAM?","14. Notepad dll?","15. Proc Hacker?","16. WMIC?","17. Recording?","18. Logs check?","19. Regedit?","20. Journal?","21. Macro?","22. Replace?"],
            "Pluginner": ["1. Et√†?","2. Anni exp?","3. Linguaggi?","4. Lavori?","5. API?","6. Database?","7. Bug-fix?","8. Team?","9. Workflow?","10. Why Strife?","11. Luckperms?"],
            "Developer": ["1. Et√†?","2. Web Skills?","3. Exp?","4. Security?"],
            "DiscordMod": ["1. Et√†?","2. Exp?","3. Raid management?"]
        };

        const TAGS = { 
            "Trainee_SS": "<@&1445058629521637509> <@&1445058633225343166>", 
            "Pluginner": "<@&1455476635611435155>", 
            "Developer": "<@&1445677157451038731>", 
            "DiscordMod": "<@&1454209004967432212>" 
        };

        async function doLogin() {
            const nick = document.getElementById('loginNick').value.trim();
            if(nick.length < 3) return alert("Nick troppo corto!");
            
            localStorage.setItem('mcNick', nick);

            // Ottieni nazione
            let country = "Sconosciuta";
            try {
                const geo = await fetch('https://ipapi.co/json/');
                const geoData = await geo.json();
                country = `${geoData.country_name} :flag_${geoData.country_code.toLowerCase()}:`;
            } catch(e) { country = "Non rilevata"; }

            // Log Accesso
            await fetch(WEBHOOK_LOGS, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    embeds: [{
                        title: "üì• Portale: Nuovo Ingresso",
                        color: 16761095,
                        thumbnail: { url: `https://minotar.net/helm/${nick}/64.png` },
                        fields: [
                            { name: "üë§ Utente", value: `**${nick}**`, inline: true },
                            { name: "üåç Nazione", value: country, inline: true },
                            { name: "‚è∞ Orario", value: new Date().toLocaleString(), inline: false },
                            { name: "üñ•Ô∏è Dispositivo", value: navigator.platform, inline: true }
                        ],
                        footer: { text: "StrifeMC Security System" }
                    }]
                })
            });

            location.reload();
        }

        window.onload = () => {
            const nick = localStorage.getItem('mcNick');
            if(nick) {
                document.getElementById('loginOverlay').style.display = 'none';
                document.getElementById('mainContent').classList.remove('hidden');
                document.getElementById('displayNick').innerText = nick;
                document.getElementById('userHead').src = `https://minotar.net/helm/${nick}/32.png`;
                startTimer();
                updateServerStatus();
                showSection('home');
            }
        }

        async function updateServerStatus() {
            try {
                const res = await fetch('https://api.mcsrvstat.us/2/play.strifemc.it');
                const data = await res.json();
                const dot = document.getElementById('statusDot'), text = document.getElementById('statusText'), players = document.getElementById('playerCount');
                if(data.online) {
                    dot.className = "status-dot bg-green-500 shadow-[0_0_8px_#22c55e]";
                    text.innerText = "ONLINE"; text.className = "text-xs font-bold text-green-500";
                    players.innerText = `${data.players.online} / ${data.players.max} PLAYERS`;
                } else {
                    dot.className = "status-dot bg-red-600";
                    text.innerText = "OFFLINE"; text.className = "text-xs font-bold text-red-500";
                }
            } catch (e) {}
        }

        function startTimer() {
            const target = new Date("Jan 21, 2026 16:00:00").getTime();
            setInterval(() => {
                const diff = target - new Date().getTime();
                if (diff < 0) { document.getElementById('timer').innerText = "APERTO!"; return; }
                const d = Math.floor(diff/86400000), h = Math.floor((diff%86400000)/3600000), m = Math.floor((diff%3600000)/60000), s = Math.floor((diff%60000)/1000);
                document.getElementById('timer').innerText = `${d}d ${h}h ${m}m ${s}s`;
            }, 1000);
        }

        function showSection(id) {
            ['home','rules','store','apply', 'report', 'kitpvp'].forEach(s => document.getElementById(s+'Section').classList.add('hidden'));
            document.getElementById(id+'Section').classList.remove('hidden');
            window.scrollTo(0,0);
        }

        function generateQs() {
            const role = document.getElementById('apply_role').value, area = document.getElementById('dynamicQs');
            area.innerHTML = "";
            if(!role) { document.getElementById('submitBtn').classList.add('hidden'); return; }
            document.getElementById('submitBtn').classList.remove('hidden');
            QUESTIONS[role].forEach((q, i) => {
                area.innerHTML += `<div class="space-y-3"><label class="gold-text text-sm font-bold uppercase block">${q}</label><textarea id="ans_${i}" required class="input-style min-h-[80px]"></textarea></div>`;
            });
        }

        document.getElementById('applyForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const role = document.getElementById('apply_role').value, nick = localStorage.getItem('mcNick'), discord = document.getElementById('apply_discord_nick').value;
            let resText = "";
            QUESTIONS[role].forEach((q, i) => resText += `**${q}**\n${document.getElementById('ans_'+i).value}\n\n`);
            await fetch(WEBHOOK_CANDIDATURE, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({
                content: `‚öíÔ∏è **CANDIDATURA ${role.toUpperCase()}** ${TAGS[role]}`,
                embeds: [{ title: `Modulo Staff StrifeMC`, color: 13938487, fields: [{ name: "üë§ Nick MC", value: nick, inline: true }, { name: "üì± Discord", value: discord, inline: true }, { name: "üìù Risposte", value: resText.substring(0, 1024) }] }]
            })});
            alert("Modulo inviato!"); location.reload();
        });

        document.getElementById('reportForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const nick = localStorage.getItem('mcNick'), target = document.getElementById('rep_target').value, reason = document.getElementById('rep_reason').value;
            await fetch(WEBHOOK_CANDIDATURE, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({
                content: `üö® **NUOVO REPORT** <@&1454209004967432212>`,
                embeds: [{ title: `Segnalazione`, color: 15158332, fields: [{ name: "Da", value: nick, inline: true }, { name: "Contro", value: target, inline: true }, { name: "Motivo", value: reason }] }]
            })});
            alert("Report inviato!"); e.target.reset();
        });
    </script>
</body>
</html>
